# =============================================================================
# SCON Backend - Production Environment Configuration
# =============================================================================

spring:
  # SQLite Database for Production
  datasource:
    url: jdbc:sqlite:${SQLITE_DB_PATH:/var/lib/scon/data/scon_prod.db}
    driver-class-name: org.sqlite.JDBC
    hikari:
      # SQLite는 단일 연결이므로 풀 크기 조정
      maximum-pool-size: 1
      minimum-idle: 1
      connection-timeout: 30000
      # SQLite 특성: WAL 모드 활성화 권장
      connection-init-sql: "PRAGMA journal_mode=WAL; PRAGMA foreign_keys=ON;"

  # JPA Production Settings
  jpa:
    hibernate:
      ddl-auto: validate  # 프로덕션에서는 validate 또는 none
    show-sql: false
    database-platform: org.hibernate.community.dialect.SQLiteDialect
    properties:
      hibernate:
        dialect: org.hibernate.community.dialect.SQLiteDialect

# CORS Configuration - Production
# 프로덕션 환경에서는 반드시 환경 변수 CORS_ALLOWED_ORIGINS를 설정해야 합니다.
# 예: CORS_ALLOWED_ORIGINS=https://lawfulshift.com,https://www.lawfulshift.com
app:
  cors:
    allowed-origins: ${CORS_ALLOWED_ORIGINS:}

# Logging - Production level
logging:
  level:
    root: WARN
    vibe.scon: INFO
    org.hibernate.SQL: WARN

