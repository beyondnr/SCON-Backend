# =============================================================================
# SCON Backend - Common Configuration
# =============================================================================

spring:
  application:
    name: scon-backend

  # Default Profile
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}

  # JPA Common Settings
  jpa:
    open-in-view: false
    properties:
      hibernate:
        format_sql: true
        default_batch_fetch_size: 100

# Server Configuration
server:
  port: 8080
  servlet:
    context-path: /

# Logging Common Settings
logging:
  level:
    root: INFO
    vibe.scon: ${LOG_LEVEL:DEBUG}

# =============================================================================
# Application Custom Properties
# =============================================================================
app:
  # ─────────────────────────────────────────────────────────────────────────
  # JWT Configuration
  # ─────────────────────────────────────────────────────────────────────────
  jwt:
    secret: ${JWT_SECRET_KEY:}
    access-expiration: ${JWT_ACCESS_EXPIRATION:1800000}
    refresh-expiration: ${JWT_REFRESH_EXPIRATION:604800000}

  # ─────────────────────────────────────────────────────────────────────────
  # Encryption Configuration (PII 암호화)
  # ─────────────────────────────────────────────────────────────────────────
  encryption:
    key: ${ENCRYPTION_KEY:}
    algorithm: AES/GCM/NoPadding

  # ─────────────────────────────────────────────────────────────────────────
  # AI Model Configuration
  # ─────────────────────────────────────────────────────────────────────────
  ai:
    # OpenAI
    openai:
      api-key: ${OPENAI_API_KEY:}
      model: ${OPENAI_MODEL:gpt-4}
      base-url: ${OPENAI_BASE_URL:https://api.openai.com/v1}
      max-tokens: ${OPENAI_MAX_TOKENS:2000}
      temperature: ${OPENAI_TEMPERATURE:0.7}

    # Google Gemini
    gemini:
      api-key: ${GEMINI_API_KEY:}
      model: ${GEMINI_MODEL:gemini-pro}

    # LangChain Python Service
    langchain:
      service-url: ${LANGCHAIN_SERVICE_URL:http://localhost:8000}
      api-key: ${LANGCHAIN_SERVICE_API_KEY:}

  # ─────────────────────────────────────────────────────────────────────────
  # CORS Configuration
  # ─────────────────────────────────────────────────────────────────────────
  cors:
    # 허용할 Origin 목록 (쉼표로 구분)
    # 개발 환경: 기본값으로 localhost 포트 사용
    # 프로덕션 환경: 환경 변수 CORS_ALLOWED_ORIGINS로 설정 필수
    # 예: CORS_ALLOWED_ORIGINS=https://lawfulshift.com,https://www.lawfulshift.com
    allowed-origins: ${CORS_ALLOWED_ORIGINS:}

  # ─────────────────────────────────────────────────────────────────────────
  # External Services Configuration
  # ─────────────────────────────────────────────────────────────────────────
  notification:
    kakao:
      api-key: ${KAKAO_API_KEY:}
      sender-key: ${KAKAO_SENDER_KEY:}
    sms:
      api-key: ${SMS_API_KEY:}
      sender-number: ${SMS_SENDER_NUMBER:}

  storage:
    aws:
      access-key: ${AWS_ACCESS_KEY:}
      secret-key: ${AWS_SECRET_KEY:}
      region: ${AWS_REGION:ap-northeast-2}
      s3-bucket: ${S3_BUCKET_NAME:scon-evidence}
