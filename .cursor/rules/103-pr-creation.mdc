---
description: PR 생성 전 필수 테스트 실행 및 PR 본문 형식 규칙 정의
globs: 
alwaysApply: true
---
Globs: /**/*

# Pull Request 생성 규칙

## 필수 사전 작업

### 1. 테스트 실행 (MANDATORY)
PR 생성 **전에 반드시** 다음 테스트를 실행하고 결과를 확인해야 합니다:

#### 1.1 빌드 테스트
```bash
./gradlew clean build
```
- **필수**: 빌드가 성공해야 함 (`BUILD SUCCESSFUL`)
- 실패 시 PR 생성 불가

#### 1.2 단위 테스트 실행
```bash
./gradlew test
```
- **필수**: 모든 테스트 케이스 실행
- 테스트 결과를 PR 본문에 포함해야 함

#### 1.3 통합 테스트 실행 (해당되는 경우)
```bash
./gradlew integrationTest
# 또는
./gradlew test --tests "*IntegrationTest"
```
- API 통합 테스트가 있는 경우 실행 필수

#### 1.4 테스트 커버리지 확인 (권장)
```bash
./gradlew test jacocoTestReport
```
- 테스트 커버리지 리포트 확인

### 2. 코드 품질 검사
```bash
./gradlew check
```
- Linter, 코드 스타일 검사 통과 확인

---

## PR 본문 형식 (MANDATORY)

PR 본문은 다음 형식을 **반드시** 따라야 합니다. `pr-body-issue-003.md`를 참고하세요.

### 필수 섹션 구조

```markdown
# Implementation Report: {ISSUE-ID}

## {이슈 제목}

| 항목 | 내용 |
|------|------|
| **Issue ID** | {ISSUE-ID} |
| **GitHub Issue** | [#{번호}](URL) |
| **Pull Request** | [#{PR번호}](URL) |
| **실행일** | YYYY-MM-DD |
| **커밋 해시** | `{hash}` |
| **상태** | ✅ Completed / ❌ Failed / 🔄 In Progress |

---

## 1. 실행 개요

### 1.1 목적
{구현 목적 설명}

### 1.2 범위
- {범위 1}
- {범위 2}

### 1.3 적용된 Cursor Rules
| Rule | 설명 |
|------|------|
| `{rule-name}.mdc` | {설명} |

---

## 2. 실행 단계

### Phase {N}: {Phase 제목} ✅
**목표**: {목표 설명}

**작업 내용**:
- {작업 1}
- {작업 2}

**생성 파일**:
```
{파일 경로 구조}
```

**주요 구현 사항**:
- {구현 사항 1}
- {구현 사항 2}

---

## 3. 생성된 파일 목록

### 3.1 {카테고리} (N개)
| 파일 | 설명 |
|------|------|
| `{파일경로}` | {설명} |

---

## 4. API 엔드포인트 요약 (해당되는 경우)

### 4.1 {API 카테고리} (N개)
| Method | Path | 인증 | 설명 |
|--------|------|------|------|
| POST | `/api/v1/...` | JWT | {설명} |

---

## 5. Acceptance Criteria 검증

### AC-{N}: {AC 제목} ✅
- ✅ {검증 항목 1}
- ✅ {검증 항목 2}
- ⚠️ {미완료 항목} (비고)

---

## 6. 테스트 케이스 및 실행 결과 (MANDATORY)

### 6.1 테스트 케이스 목록

#### 6.1.1 {카테고리} 테스트 (N개)
- TC-{ID}-{N}: {테스트 케이스 설명}
- TC-{ID}-{N+1}: {테스트 케이스 설명}

**총 테스트 케이스**: {N}개

---

### 6.2 테스트 실행 결과 (MANDATORY)

#### 6.2.1 빌드 테스트 결과
```bash
$ ./gradlew clean build
BUILD SUCCESSFUL in XXs
X actionable tasks: X executed
```

**상태**: ✅ PASSED / ❌ FAILED

#### 6.2.2 단위 테스트 실행 결과
```bash
$ ./gradlew test
BUILD SUCCESSFUL in XXs
X tests completed, X passed, X failed, X skipped
```

**상태**: ✅ PASSED / ❌ FAILED

**실행된 테스트**:
- ✅ `{TestClass}.{testMethod}()` - {설명}
- ✅ `{TestClass}.{testMethod}()` - {설명}
- ❌ `{TestClass}.{testMethod}()` - {실패 이유} (해당되는 경우)

**테스트 커버리지** (해당되는 경우):
- Line Coverage: {X}%
- Branch Coverage: {X}%

#### 6.2.3 통합 테스트 실행 결과 (해당되는 경우)
```bash
$ ./gradlew integrationTest
{결과}
```

**상태**: ✅ PASSED / ❌ FAILED

**실행된 통합 테스트**:
- ✅ {테스트 설명}
- ❌ {실패한 테스트} (해당되는 경우)

#### 6.2.4 테스트 케이스별 실행 결과 상세 (MANDATORY)

각 테스트 케이스에 대해 다음 정보를 포함해야 합니다:

| Test Case ID | 테스트 설명 | 실행 결과 | 비고 |
|--------------|-------------|-----------|------|
| TC-{ID}-001 | {설명} | ✅ PASSED / ❌ FAILED / ⚠️ SKIPPED | {비고} |
| TC-{ID}-002 | {설명} | ✅ PASSED / ❌ FAILED / ⚠️ SKIPPED | {비고} |

**실행 결과 요약**:
- ✅ 통과: {N}개
- ❌ 실패: {N}개
- ⚠️ 스킵: {N}개
- **총 테스트 케이스**: {N}개

**실패한 테스트가 있는 경우**:
- 실패 원인 분석 및 해결 방안 명시
- 다음 작업에서 수정 예정인 경우 명시

---

## 7. Git 커밋 정보

### 7.1 브랜치
```
{브랜치명}
```

### 7.2 커밋
```
{커밋 해시} {커밋 메시지}
```

### 7.3 변경 통계
```
X files changed
XXXX insertions(+)
XX deletions(-)
```

---

## 8. 다음 단계

{후속 이슈 또는 작업 안내}

---

*Generated: {YYYY-MM-DD}*
*Agent: Cursor AI Assistant*
*Branch: {브랜치명}*
*PR: #{PR번호}*
*Closes #{Issue번호}*
```

---

## PR 생성 절차

### Step 1: 테스트 실행
1. `./gradlew clean build` 실행
2. `./gradlew test` 실행
3. 테스트 결과 확인 및 기록

### Step 2: PR 본문 작성
1. 위 형식에 따라 PR 본문 작성
2. **반드시** "6. 테스트 케이스 및 실행 결과" 섹션 포함
3. 각 테스트 케이스별 실행 결과 포함

### Step 3: PR 생성
```bash
gh pr create --draft --title "{PR 제목}" --body-file pr-body.md
```

---

## 검증 체크리스트

PR 생성 전 다음 항목을 확인하세요:

- [ ] 빌드 테스트 실행 및 통과 확인
- [ ] 단위 테스트 실행 및 결과 기록
- [ ] 통합 테스트 실행 (해당되는 경우)
- [ ] PR 본문에 테스트 실행 결과 포함
- [ ] 각 테스트 케이스별 실행 결과 표 포함
- [ ] PR 본문 형식 준수 확인
- [ ] Cursor Rules 참조 섹션 포함

---

## 주의사항

1. **테스트 없이 PR 생성 금지**: 테스트 실행 결과가 없는 PR은 생성하지 않습니다.
2. **실패한 테스트가 있는 경우**: PR 본문에 실패 원인 및 해결 방안을 명시해야 합니다.
3. **테스트 케이스가 없는 경우**: "테스트 케이스 미구현"으로 명시하고, 다음 작업에서 구현 예정임을 표시합니다.
4. **PR 본문 형식 준수**: 위 형식을 정확히 따라야 합니다. 형식이 다른 경우 PR 생성 전 수정해야 합니다.
